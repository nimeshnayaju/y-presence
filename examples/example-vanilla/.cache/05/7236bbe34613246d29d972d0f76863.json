{"id":"../../node_modules/lib0/broadcastchannel.js","dependencies":[{"name":"/Users/nimeshnayaju/Desktop/y-presence/examples/example-vanilla/package.json","includedInParent":true,"mtime":1653664633087},{"name":"/Users/nimeshnayaju/Desktop/y-presence/node_modules/lib0/package.json","includedInParent":true,"mtime":1653674046474},{"name":"./map.js","loc":{"line":20,"column":21,"index":594},"parent":"/Users/nimeshnayaju/Desktop/y-presence/node_modules/lib0/broadcastchannel.js","resolved":"/Users/nimeshnayaju/Desktop/y-presence/node_modules/lib0/map.js"},{"name":"./buffer.js","loc":{"line":21,"column":24,"index":629},"parent":"/Users/nimeshnayaju/Desktop/y-presence/node_modules/lib0/broadcastchannel.js","resolved":"/Users/nimeshnayaju/Desktop/y-presence/node_modules/lib0/buffer.js"},{"name":"./storage.js","loc":{"line":22,"column":25,"index":668},"parent":"/Users/nimeshnayaju/Desktop/y-presence/node_modules/lib0/broadcastchannel.js","resolved":"/Users/nimeshnayaju/Desktop/y-presence/node_modules/lib0/storage.js"}],"generated":{"js":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.unsubscribe = exports.subscribe = exports.publish = void 0;\n\nvar map = _interopRequireWildcard(require(\"./map.js\"));\n\nvar buffer = _interopRequireWildcard(require(\"./buffer.js\"));\n\nvar storage = _interopRequireWildcard(require(\"./storage.js\"));\n\nfunction _getRequireWildcardCache(nodeInterop) { if (typeof WeakMap !== \"function\") return null; var cacheBabelInterop = new WeakMap(); var cacheNodeInterop = new WeakMap(); return (_getRequireWildcardCache = function (nodeInterop) { return nodeInterop ? cacheNodeInterop : cacheBabelInterop; })(nodeInterop); }\n\nfunction _interopRequireWildcard(obj, nodeInterop) { if (!nodeInterop && obj && obj.__esModule) { return obj; } if (obj === null || typeof obj !== \"object\" && typeof obj !== \"function\") { return { default: obj }; } var cache = _getRequireWildcardCache(nodeInterop); if (cache && cache.has(obj)) { return cache.get(obj); } var newObj = {}; var hasPropertyDescriptor = Object.defineProperty && Object.getOwnPropertyDescriptor; for (var key in obj) { if (key !== \"default\" && Object.prototype.hasOwnProperty.call(obj, key)) { var desc = hasPropertyDescriptor ? Object.getOwnPropertyDescriptor(obj, key) : null; if (desc && (desc.get || desc.set)) { Object.defineProperty(newObj, key, desc); } else { newObj[key] = obj[key]; } } } newObj.default = obj; if (cache) { cache.set(obj, newObj); } return newObj; }\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _defineProperties(target, props) { for (var i = 0; i < props.length; i++) { var descriptor = props[i]; descriptor.enumerable = descriptor.enumerable || false; descriptor.configurable = true; if (\"value\" in descriptor) descriptor.writable = true; Object.defineProperty(target, descriptor.key, descriptor); } }\n\nfunction _createClass(Constructor, protoProps, staticProps) { if (protoProps) _defineProperties(Constructor.prototype, protoProps); if (staticProps) _defineProperties(Constructor, staticProps); Object.defineProperty(Constructor, \"prototype\", { writable: false }); return Constructor; }\n\n/**\n * @typedef {Object} Channel\n * @property {Set<function(any, any):any>} Channel.subs\n * @property {any} Channel.bc\n */\n\n/**\n * @type {Map<string, Channel>}\n */\nvar channels = new Map();\n\nvar LocalStoragePolyfill = /*#__PURE__*/function () {\n  /**\n   * @param {string} room\n   */\n  function LocalStoragePolyfill(room) {\n    var _this = this;\n\n    _classCallCheck(this, LocalStoragePolyfill);\n\n    this.room = room;\n    /**\n     * @type {null|function({data:ArrayBuffer}):void}\n     */\n\n    this.onmessage = null;\n    storage.onChange(function (e) {\n      return e.key === room && _this.onmessage !== null && _this.onmessage({\n        data: buffer.fromBase64(e.newValue || '')\n      });\n    });\n  }\n  /**\n   * @param {ArrayBuffer} buf\n   */\n\n\n  _createClass(LocalStoragePolyfill, [{\n    key: \"postMessage\",\n    value: function postMessage(buf) {\n      storage.varStorage.setItem(this.room, buffer.toBase64(buffer.createUint8ArrayFromArrayBuffer(buf)));\n    }\n  }]);\n\n  return LocalStoragePolyfill;\n}(); // Use BroadcastChannel or Polyfill\n\n\nvar BC = typeof BroadcastChannel === 'undefined' ? LocalStoragePolyfill : BroadcastChannel;\n/**\n * @param {string} room\n * @return {Channel}\n */\n\nvar getChannel = function getChannel(room) {\n  return map.setIfUndefined(channels, room, function () {\n    var subs = new Set();\n    var bc = new BC(room);\n    /**\n     * @param {{data:ArrayBuffer}} e\n     */\n\n    bc.onmessage = function (e) {\n      return subs.forEach(function (sub) {\n        return sub(e.data, 'broadcastchannel');\n      });\n    };\n\n    return {\n      bc: bc,\n      subs: subs\n    };\n  });\n};\n/**\n * Subscribe to global `publish` events.\n *\n * @function\n * @param {string} room\n * @param {function(any, any):any} f\n */\n\n\nvar subscribe = function subscribe(room, f) {\n  return getChannel(room).subs.add(f);\n};\n/**\n * Unsubscribe from `publish` global events.\n *\n * @function\n * @param {string} room\n * @param {function(any, any):any} f\n */\n\n\nexports.subscribe = subscribe;\n\nvar unsubscribe = function unsubscribe(room, f) {\n  return getChannel(room).subs.delete(f);\n};\n/**\n * Publish data to all subscribers (including subscribers on this tab)\n *\n * @function\n * @param {string} room\n * @param {any} data\n * @param {any} [origin]\n */\n\n\nexports.unsubscribe = unsubscribe;\n\nvar publish = function publish(room, data) {\n  var origin = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;\n  var c = getChannel(room);\n  c.bc.postMessage(data);\n  c.subs.forEach(function (sub) {\n    return sub(data, origin);\n  });\n};\n\nexports.publish = publish;"},"sourceMaps":{"js":{"mappings":[{"generated":{"line":8,"column":0},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":20,"column":0}},{"generated":{"line":10,"column":0},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":21,"column":0}},{"generated":{"line":12,"column":0},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":22,"column":0}},{"generated":{"line":24,"column":0},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":24,"column":0}},{"generated":{"line":25,"column":0},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":25,"column":0}},{"generated":{"line":26,"column":0},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":26,"column":0}},{"generated":{"line":27,"column":0},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":27,"column":0}},{"generated":{"line":28,"column":0},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":28,"column":0}},{"generated":{"line":30,"column":0},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":30,"column":0}},{"generated":{"line":31,"column":0},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":31,"column":0}},{"generated":{"line":32,"column":0},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":32,"column":0}},{"generated":{"line":33,"column":0},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":33,"column":0}},{"generated":{"line":33,"column":4},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":33,"column":6},"name":"channels"},{"generated":{"line":33,"column":12},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":33,"column":14}},{"generated":{"line":33,"column":15},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":33,"column":17}},{"generated":{"line":33,"column":19},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":33,"column":21},"name":"Map"},{"generated":{"line":33,"column":22},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":33,"column":17}},{"generated":{"line":33,"column":24},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":33,"column":0}},{"generated":{"line":35,"column":4},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":35,"column":6},"name":"LocalStoragePolyfill"},{"generated":{"line":36,"column":2},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":36,"column":2}},{"generated":{"line":37,"column":0},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":37,"column":0}},{"generated":{"line":38,"column":0},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":38,"column":0}},{"generated":{"line":39,"column":2},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":39,"column":2}},{"generated":{"line":39,"column":32},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":39,"column":15},"name":"room"},{"generated":{"line":39,"column":36},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":39,"column":2}},{"generated":{"line":39,"column":38},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":39,"column":21}},{"generated":{"line":40,"column":4},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":39,"column":21}},{"generated":{"line":42,"column":4},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":39,"column":21}},{"generated":{"line":44,"column":4},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":40,"column":4}},{"generated":{"line":44,"column":9},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":40,"column":9},"name":"room"},{"generated":{"line":44,"column":13},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":40,"column":4}},{"generated":{"line":44,"column":16},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":40,"column":16},"name":"room"},{"generated":{"line":44,"column":20},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":40,"column":4}},{"generated":{"line":45,"column":4},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":41,"column":4}},{"generated":{"line":46,"column":0},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":42,"column":0}},{"generated":{"line":47,"column":0},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":43,"column":0}},{"generated":{"line":49,"column":4},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":44,"column":4}},{"generated":{"line":49,"column":9},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":44,"column":9},"name":"onmessage"},{"generated":{"line":49,"column":18},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":44,"column":4}},{"generated":{"line":49,"column":21},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":44,"column":21}},{"generated":{"line":49,"column":25},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":44,"column":4}},{"generated":{"line":50,"column":4},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":45,"column":4},"name":"storage"},{"generated":{"line":50,"column":11},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":45,"column":11}},{"generated":{"line":50,"column":12},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":45,"column":12},"name":"onChange"},{"generated":{"line":50,"column":20},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":45,"column":4}},{"generated":{"line":50,"column":21},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":45,"column":21}},{"generated":{"line":50,"column":31},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":45,"column":21},"name":"e"},{"generated":{"line":50,"column":32},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":45,"column":22}},{"generated":{"line":51,"column":6},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":45,"column":22}},{"generated":{"line":51,"column":13},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":45,"column":26},"name":"e"},{"generated":{"line":51,"column":14},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":45,"column":27}},{"generated":{"line":51,"column":15},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":45,"column":28},"name":"key"},{"generated":{"line":51,"column":18},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":45,"column":26}},{"generated":{"line":51,"column":23},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":45,"column":36},"name":"room"},{"generated":{"line":51,"column":27},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":45,"column":26}},{"generated":{"line":51,"column":31},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":45,"column":44}},{"generated":{"line":51,"column":36},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":45,"column":48}},{"generated":{"line":51,"column":37},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":45,"column":49},"name":"onmessage"},{"generated":{"line":51,"column":46},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":45,"column":44}},{"generated":{"line":51,"column":51},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":45,"column":63}},{"generated":{"line":51,"column":55},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":45,"column":26}},{"generated":{"line":51,"column":59},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":45,"column":71}},{"generated":{"line":51,"column":64},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":45,"column":75}},{"generated":{"line":51,"column":65},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":45,"column":76},"name":"onmessage"},{"generated":{"line":51,"column":74},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":45,"column":71}},{"generated":{"line":51,"column":75},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":45,"column":86}},{"generated":{"line":52,"column":8},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":45,"column":88},"name":"data"},{"generated":{"line":52,"column":12},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":45,"column":92}},{"generated":{"line":52,"column":14},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":45,"column":94},"name":"buffer"},{"generated":{"line":52,"column":20},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":45,"column":100}},{"generated":{"line":52,"column":21},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":45,"column":101},"name":"fromBase64"},{"generated":{"line":52,"column":31},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":45,"column":94}},{"generated":{"line":52,"column":32},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":45,"column":112},"name":"e"},{"generated":{"line":52,"column":33},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":45,"column":113}},{"generated":{"line":52,"column":34},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":45,"column":114},"name":"newValue"},{"generated":{"line":52,"column":42},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":45,"column":112}},{"generated":{"line":52,"column":46},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":45,"column":126}},{"generated":{"line":52,"column":48},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":45,"column":94}},{"generated":{"line":53,"column":6},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":45,"column":86}},{"generated":{"line":53,"column":7},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":45,"column":71}},{"generated":{"line":53,"column":8},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":45,"column":22}},{"generated":{"line":54,"column":4},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":45,"column":22}},{"generated":{"line":54,"column":5},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":45,"column":4}},{"generated":{"line":55,"column":2},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":46,"column":3}},{"generated":{"line":56,"column":2},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":48,"column":2}},{"generated":{"line":57,"column":0},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":49,"column":0}},{"generated":{"line":58,"column":0},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":50,"column":0}},{"generated":{"line":63,"column":11},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":51,"column":2}},{"generated":{"line":63,"column":32},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":51,"column":15},"name":"buf"},{"generated":{"line":63,"column":35},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":51,"column":2}},{"generated":{"line":63,"column":37},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":51,"column":20}},{"generated":{"line":64,"column":6},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":52,"column":4},"name":"storage"},{"generated":{"line":64,"column":13},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":52,"column":11}},{"generated":{"line":64,"column":14},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":52,"column":12},"name":"varStorage"},{"generated":{"line":64,"column":24},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":52,"column":4}},{"generated":{"line":64,"column":25},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":52,"column":23},"name":"setItem"},{"generated":{"line":64,"column":32},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":52,"column":4}},{"generated":{"line":64,"column":33},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":52,"column":31}},{"generated":{"line":64,"column":38},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":52,"column":36},"name":"room"},{"generated":{"line":64,"column":42},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":52,"column":4}},{"generated":{"line":64,"column":44},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":52,"column":42},"name":"buffer"},{"generated":{"line":64,"column":50},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":52,"column":48}},{"generated":{"line":64,"column":51},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":52,"column":49},"name":"toBase64"},{"generated":{"line":64,"column":59},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":52,"column":42}},{"generated":{"line":64,"column":60},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":52,"column":58},"name":"buffer"},{"generated":{"line":64,"column":66},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":52,"column":64}},{"generated":{"line":64,"column":67},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":52,"column":65},"name":"createUint8ArrayFromArrayBuffer"},{"generated":{"line":64,"column":98},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":52,"column":58}},{"generated":{"line":64,"column":99},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":52,"column":97},"name":"buf"},{"generated":{"line":64,"column":102},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":52,"column":58}},{"generated":{"line":64,"column":103},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":52,"column":42}},{"generated":{"line":64,"column":104},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":52,"column":4}},{"generated":{"line":65,"column":4},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":53,"column":3}},{"generated":{"line":69,"column":5},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":56,"column":0}},{"generated":{"line":72,"column":0},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":57,"column":0}},{"generated":{"line":72,"column":4},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":57,"column":6},"name":"BC"},{"generated":{"line":72,"column":6},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":57,"column":8}},{"generated":{"line":72,"column":9},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":57,"column":11}},{"generated":{"line":72,"column":16},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":57,"column":18},"name":"BroadcastChannel"},{"generated":{"line":72,"column":32},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":57,"column":11}},{"generated":{"line":72,"column":37},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":57,"column":39}},{"generated":{"line":72,"column":48},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":57,"column":11}},{"generated":{"line":72,"column":51},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":57,"column":53},"name":"LocalStoragePolyfill"},{"generated":{"line":72,"column":71},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":57,"column":11}},{"generated":{"line":72,"column":74},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":57,"column":76},"name":"BroadcastChannel"},{"generated":{"line":72,"column":90},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":57,"column":0}},{"generated":{"line":73,"column":0},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":59,"column":0}},{"generated":{"line":74,"column":0},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":60,"column":0}},{"generated":{"line":75,"column":0},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":61,"column":0}},{"generated":{"line":76,"column":0},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":62,"column":0}},{"generated":{"line":78,"column":0},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":63,"column":0}},{"generated":{"line":78,"column":4},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":63,"column":6},"name":"getChannel"},{"generated":{"line":78,"column":14},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":63,"column":16}},{"generated":{"line":78,"column":17},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":63,"column":19}},{"generated":{"line":78,"column":26},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":63,"column":6},"name":"getChannel"},{"generated":{"line":78,"column":36},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":63,"column":19}},{"generated":{"line":78,"column":37},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":63,"column":19},"name":"room"},{"generated":{"line":78,"column":41},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":63,"column":23}},{"generated":{"line":79,"column":2},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":63,"column":23}},{"generated":{"line":79,"column":9},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":64,"column":2},"name":"map"},{"generated":{"line":79,"column":12},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":64,"column":5}},{"generated":{"line":79,"column":13},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":64,"column":6},"name":"setIfUndefined"},{"generated":{"line":79,"column":27},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":64,"column":2}},{"generated":{"line":79,"column":28},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":64,"column":21},"name":"channels"},{"generated":{"line":79,"column":36},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":64,"column":2}},{"generated":{"line":79,"column":38},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":64,"column":31},"name":"room"},{"generated":{"line":79,"column":42},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":64,"column":2}},{"generated":{"line":79,"column":44},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":64,"column":37}},{"generated":{"line":79,"column":56},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":64,"column":43}},{"generated":{"line":80,"column":4},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":65,"column":4}},{"generated":{"line":80,"column":8},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":65,"column":10},"name":"subs"},{"generated":{"line":80,"column":12},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":65,"column":14}},{"generated":{"line":80,"column":15},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":65,"column":17}},{"generated":{"line":80,"column":19},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":65,"column":21},"name":"Set"},{"generated":{"line":80,"column":22},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":65,"column":17}},{"generated":{"line":80,"column":24},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":65,"column":4}},{"generated":{"line":81,"column":4},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":66,"column":4}},{"generated":{"line":81,"column":8},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":66,"column":10},"name":"bc"},{"generated":{"line":81,"column":10},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":66,"column":12}},{"generated":{"line":81,"column":13},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":66,"column":15}},{"generated":{"line":81,"column":17},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":66,"column":19},"name":"BC"},{"generated":{"line":81,"column":19},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":66,"column":15}},{"generated":{"line":81,"column":20},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":66,"column":22},"name":"room"},{"generated":{"line":81,"column":24},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":66,"column":15}},{"generated":{"line":81,"column":25},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":66,"column":4}},{"generated":{"line":82,"column":4},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":67,"column":4}},{"generated":{"line":83,"column":0},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":68,"column":0}},{"generated":{"line":84,"column":0},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":69,"column":0}},{"generated":{"line":86,"column":4},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":70,"column":4},"name":"bc"},{"generated":{"line":86,"column":6},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":70,"column":6}},{"generated":{"line":86,"column":7},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":70,"column":7},"name":"onmessage"},{"generated":{"line":86,"column":16},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":70,"column":4}},{"generated":{"line":86,"column":19},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":70,"column":19}},{"generated":{"line":86,"column":29},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":70,"column":19},"name":"e"},{"generated":{"line":86,"column":30},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":70,"column":20}},{"generated":{"line":87,"column":6},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":70,"column":20}},{"generated":{"line":87,"column":13},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":70,"column":24},"name":"subs"},{"generated":{"line":87,"column":17},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":70,"column":28}},{"generated":{"line":87,"column":18},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":70,"column":29},"name":"forEach"},{"generated":{"line":87,"column":25},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":70,"column":24}},{"generated":{"line":87,"column":26},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":70,"column":37}},{"generated":{"line":87,"column":36},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":70,"column":37},"name":"sub"},{"generated":{"line":87,"column":39},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":70,"column":40}},{"generated":{"line":88,"column":8},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":70,"column":40}},{"generated":{"line":88,"column":15},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":70,"column":44},"name":"sub"},{"generated":{"line":88,"column":18},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":70,"column":47}},{"generated":{"line":88,"column":19},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":70,"column":48},"name":"e"},{"generated":{"line":88,"column":20},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":70,"column":49}},{"generated":{"line":88,"column":21},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":70,"column":50},"name":"data"},{"generated":{"line":88,"column":25},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":70,"column":47}},{"generated":{"line":88,"column":27},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":70,"column":56}},{"generated":{"line":88,"column":45},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":70,"column":47}},{"generated":{"line":88,"column":46},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":70,"column":40}},{"generated":{"line":89,"column":6},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":70,"column":40}},{"generated":{"line":89,"column":7},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":70,"column":24}},{"generated":{"line":89,"column":8},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":70,"column":20}},{"generated":{"line":90,"column":4},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":70,"column":20}},{"generated":{"line":90,"column":5},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":70,"column":4}},{"generated":{"line":92,"column":4},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":71,"column":4}},{"generated":{"line":92,"column":11},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":71,"column":11}},{"generated":{"line":93,"column":6},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":72,"column":6},"name":"bc"},{"generated":{"line":93,"column":8},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":72,"column":8}},{"generated":{"line":93,"column":10},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":72,"column":6},"name":"bc"},{"generated":{"line":93,"column":12},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":71,"column":11}},{"generated":{"line":94,"column":6},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":72,"column":10},"name":"subs"},{"generated":{"line":94,"column":10},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":72,"column":14}},{"generated":{"line":94,"column":12},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":72,"column":10},"name":"subs"},{"generated":{"line":95,"column":4},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":71,"column":11}},{"generated":{"line":95,"column":5},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":71,"column":4}},{"generated":{"line":96,"column":2},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":74,"column":3}},{"generated":{"line":96,"column":3},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":64,"column":2}},{"generated":{"line":96,"column":4},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":63,"column":23}},{"generated":{"line":97,"column":0},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":63,"column":23}},{"generated":{"line":97,"column":1},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":63,"column":0}},{"generated":{"line":98,"column":0},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":76,"column":0}},{"generated":{"line":99,"column":0},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":77,"column":0}},{"generated":{"line":100,"column":0},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":78,"column":0}},{"generated":{"line":101,"column":0},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":79,"column":0}},{"generated":{"line":102,"column":0},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":80,"column":0}},{"generated":{"line":103,"column":0},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":81,"column":0}},{"generated":{"line":104,"column":0},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":82,"column":0}},{"generated":{"line":107,"column":0},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":83,"column":7}},{"generated":{"line":107,"column":4},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":83,"column":13},"name":"subscribe"},{"generated":{"line":107,"column":13},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":83,"column":22}},{"generated":{"line":107,"column":16},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":83,"column":25}},{"generated":{"line":107,"column":25},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":83,"column":13},"name":"subscribe"},{"generated":{"line":107,"column":34},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":83,"column":25}},{"generated":{"line":107,"column":35},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":83,"column":26},"name":"room"},{"generated":{"line":107,"column":39},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":83,"column":25}},{"generated":{"line":107,"column":41},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":83,"column":32},"name":"f"},{"generated":{"line":107,"column":42},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":83,"column":25}},{"generated":{"line":108,"column":2},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":83,"column":25}},{"generated":{"line":108,"column":9},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":83,"column":38},"name":"getChannel"},{"generated":{"line":108,"column":19},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":83,"column":48}},{"generated":{"line":108,"column":20},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":83,"column":49},"name":"room"},{"generated":{"line":108,"column":24},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":83,"column":48}},{"generated":{"line":108,"column":25},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":83,"column":38}},{"generated":{"line":108,"column":26},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":83,"column":55},"name":"subs"},{"generated":{"line":108,"column":30},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":83,"column":38}},{"generated":{"line":108,"column":31},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":83,"column":60},"name":"add"},{"generated":{"line":108,"column":34},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":83,"column":38}},{"generated":{"line":108,"column":35},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":83,"column":64},"name":"f"},{"generated":{"line":108,"column":36},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":83,"column":38}},{"generated":{"line":108,"column":37},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":83,"column":25}},{"generated":{"line":109,"column":0},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":83,"column":25}},{"generated":{"line":109,"column":1},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":83,"column":7}},{"generated":{"line":110,"column":0},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":85,"column":0}},{"generated":{"line":111,"column":0},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":86,"column":0}},{"generated":{"line":112,"column":0},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":87,"column":0}},{"generated":{"line":113,"column":0},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":88,"column":0}},{"generated":{"line":114,"column":0},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":89,"column":0}},{"generated":{"line":115,"column":0},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":90,"column":0}},{"generated":{"line":116,"column":0},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":91,"column":0}},{"generated":{"line":121,"column":0},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":92,"column":7}},{"generated":{"line":121,"column":4},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":92,"column":13},"name":"unsubscribe"},{"generated":{"line":121,"column":15},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":92,"column":24}},{"generated":{"line":121,"column":18},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":92,"column":27}},{"generated":{"line":121,"column":27},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":92,"column":13},"name":"unsubscribe"},{"generated":{"line":121,"column":38},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":92,"column":27}},{"generated":{"line":121,"column":39},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":92,"column":28},"name":"room"},{"generated":{"line":121,"column":43},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":92,"column":27}},{"generated":{"line":121,"column":45},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":92,"column":34},"name":"f"},{"generated":{"line":121,"column":46},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":92,"column":27}},{"generated":{"line":122,"column":2},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":92,"column":27}},{"generated":{"line":122,"column":9},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":92,"column":40},"name":"getChannel"},{"generated":{"line":122,"column":19},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":92,"column":50}},{"generated":{"line":122,"column":20},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":92,"column":51},"name":"room"},{"generated":{"line":122,"column":24},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":92,"column":50}},{"generated":{"line":122,"column":25},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":92,"column":40}},{"generated":{"line":122,"column":26},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":92,"column":57},"name":"subs"},{"generated":{"line":122,"column":30},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":92,"column":40}},{"generated":{"line":122,"column":31},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":92,"column":62},"name":"delete"},{"generated":{"line":122,"column":37},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":92,"column":40}},{"generated":{"line":122,"column":38},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":92,"column":69},"name":"f"},{"generated":{"line":122,"column":39},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":92,"column":40}},{"generated":{"line":122,"column":40},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":92,"column":27}},{"generated":{"line":123,"column":0},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":92,"column":27}},{"generated":{"line":123,"column":1},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":92,"column":7}},{"generated":{"line":124,"column":0},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":94,"column":0}},{"generated":{"line":125,"column":0},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":95,"column":0}},{"generated":{"line":126,"column":0},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":96,"column":0}},{"generated":{"line":127,"column":0},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":97,"column":0}},{"generated":{"line":128,"column":0},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":98,"column":0}},{"generated":{"line":129,"column":0},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":99,"column":0}},{"generated":{"line":130,"column":0},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":100,"column":0}},{"generated":{"line":131,"column":0},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":101,"column":0}},{"generated":{"line":136,"column":0},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":102,"column":7}},{"generated":{"line":136,"column":4},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":102,"column":13},"name":"publish"},{"generated":{"line":136,"column":11},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":102,"column":20}},{"generated":{"line":136,"column":14},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":102,"column":23}},{"generated":{"line":136,"column":23},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":102,"column":13},"name":"publish"},{"generated":{"line":136,"column":30},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":102,"column":23}},{"generated":{"line":136,"column":31},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":102,"column":24},"name":"room"},{"generated":{"line":136,"column":35},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":102,"column":23}},{"generated":{"line":136,"column":37},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":102,"column":30},"name":"data"},{"generated":{"line":136,"column":41},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":102,"column":23}},{"generated":{"line":136,"column":43},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":102,"column":54}},{"generated":{"line":137,"column":2},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":102,"column":54}},{"generated":{"line":137,"column":6},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":102,"column":36},"name":"origin"},{"generated":{"line":137,"column":12},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":102,"column":54}},{"generated":{"line":137,"column":83},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":102,"column":45}},{"generated":{"line":137,"column":87},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":102,"column":54}},{"generated":{"line":138,"column":2},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":103,"column":2}},{"generated":{"line":138,"column":6},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":103,"column":8},"name":"c"},{"generated":{"line":138,"column":7},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":103,"column":9}},{"generated":{"line":138,"column":10},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":103,"column":12},"name":"getChannel"},{"generated":{"line":138,"column":20},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":103,"column":22}},{"generated":{"line":138,"column":21},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":103,"column":23},"name":"room"},{"generated":{"line":138,"column":25},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":103,"column":22}},{"generated":{"line":138,"column":26},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":103,"column":2}},{"generated":{"line":139,"column":2},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":104,"column":2},"name":"c"},{"generated":{"line":139,"column":3},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":104,"column":3}},{"generated":{"line":139,"column":4},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":104,"column":4},"name":"bc"},{"generated":{"line":139,"column":6},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":104,"column":2}},{"generated":{"line":139,"column":7},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":104,"column":7},"name":"postMessage"},{"generated":{"line":139,"column":18},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":104,"column":2}},{"generated":{"line":139,"column":19},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":104,"column":19},"name":"data"},{"generated":{"line":139,"column":23},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":104,"column":2}},{"generated":{"line":140,"column":2},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":105,"column":2},"name":"c"},{"generated":{"line":140,"column":3},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":105,"column":3}},{"generated":{"line":140,"column":4},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":105,"column":4},"name":"subs"},{"generated":{"line":140,"column":8},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":105,"column":2}},{"generated":{"line":140,"column":9},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":105,"column":9},"name":"forEach"},{"generated":{"line":140,"column":16},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":105,"column":2}},{"generated":{"line":140,"column":17},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":105,"column":17}},{"generated":{"line":140,"column":27},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":105,"column":17},"name":"sub"},{"generated":{"line":140,"column":30},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":105,"column":20}},{"generated":{"line":141,"column":4},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":105,"column":20}},{"generated":{"line":141,"column":11},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":105,"column":24},"name":"sub"},{"generated":{"line":141,"column":14},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":105,"column":27}},{"generated":{"line":141,"column":15},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":105,"column":28},"name":"data"},{"generated":{"line":141,"column":19},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":105,"column":27}},{"generated":{"line":141,"column":21},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":105,"column":34},"name":"origin"},{"generated":{"line":141,"column":27},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":105,"column":27}},{"generated":{"line":141,"column":28},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":105,"column":20}},{"generated":{"line":142,"column":2},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":105,"column":20}},{"generated":{"line":142,"column":3},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":105,"column":2}},{"generated":{"line":143,"column":0},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":106,"column":1}},{"generated":{"line":143,"column":1},"source":"../../node_modules/lib0/broadcastchannel.js","original":{"line":102,"column":7}}],"sources":{"../../node_modules/lib0/broadcastchannel.js":"/* eslint-env browser */\n\n/**\n * Helpers for cross-tab communication using broadcastchannel with LocalStorage fallback.\n *\n * ```js\n * // In browser window A:\n * broadcastchannel.subscribe('my events', data => console.log(data))\n * broadcastchannel.publish('my events', 'Hello world!') // => A: 'Hello world!' fires synchronously in same tab\n *\n * // In browser window B:\n * broadcastchannel.publish('my events', 'hello from tab B') // => A: 'hello from tab B'\n * ```\n *\n * @module broadcastchannel\n */\n\n// @todo before next major: use Uint8Array instead as buffer object\n\nimport * as map from './map.js'\nimport * as buffer from './buffer.js'\nimport * as storage from './storage.js'\n\n/**\n * @typedef {Object} Channel\n * @property {Set<function(any, any):any>} Channel.subs\n * @property {any} Channel.bc\n */\n\n/**\n * @type {Map<string, Channel>}\n */\nconst channels = new Map()\n\nclass LocalStoragePolyfill {\n  /**\n   * @param {string} room\n   */\n  constructor (room) {\n    this.room = room\n    /**\n     * @type {null|function({data:ArrayBuffer}):void}\n     */\n    this.onmessage = null\n    storage.onChange(e => e.key === room && this.onmessage !== null && this.onmessage({ data: buffer.fromBase64(e.newValue || '') }))\n  }\n\n  /**\n   * @param {ArrayBuffer} buf\n   */\n  postMessage (buf) {\n    storage.varStorage.setItem(this.room, buffer.toBase64(buffer.createUint8ArrayFromArrayBuffer(buf)))\n  }\n}\n\n// Use BroadcastChannel or Polyfill\nconst BC = typeof BroadcastChannel === 'undefined' ? LocalStoragePolyfill : BroadcastChannel\n\n/**\n * @param {string} room\n * @return {Channel}\n */\nconst getChannel = room =>\n  map.setIfUndefined(channels, room, () => {\n    const subs = new Set()\n    const bc = new BC(room)\n    /**\n     * @param {{data:ArrayBuffer}} e\n     */\n    bc.onmessage = e => subs.forEach(sub => sub(e.data, 'broadcastchannel'))\n    return {\n      bc, subs\n    }\n  })\n\n/**\n * Subscribe to global `publish` events.\n *\n * @function\n * @param {string} room\n * @param {function(any, any):any} f\n */\nexport const subscribe = (room, f) => getChannel(room).subs.add(f)\n\n/**\n * Unsubscribe from `publish` global events.\n *\n * @function\n * @param {string} room\n * @param {function(any, any):any} f\n */\nexport const unsubscribe = (room, f) => getChannel(room).subs.delete(f)\n\n/**\n * Publish data to all subscribers (including subscribers on this tab)\n *\n * @function\n * @param {string} room\n * @param {any} data\n * @param {any} [origin]\n */\nexport const publish = (room, data, origin = null) => {\n  const c = getChannel(room)\n  c.bc.postMessage(data)\n  c.subs.forEach(sub => sub(data, origin))\n}\n"},"lineCount":null}},"error":null,"hash":"e31662a5f2b0761b16cd805ab43491a6","cacheData":{"env":{}}}